<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hautū Waka — Navigating Complexity</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #FAFAFA;
            --bg-panel: #FFFFFF;
            --backdrop: rgba(0, 0, 0, 0.55);
            --text-primary: #333333;
            --text-secondary: #666666;
            --teal: #1a7a8c;
            --teal-dark: #145f6d;
            --teal-light: rgba(26, 122, 140, 0.1);
            --shadow: 0 4px 24px rgba(0, 0, 0, 0.15);
            --radius: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Raleway', sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.5;
            min-height: 100vh;
        }

        /* Main container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* Diagram container */
        .diagram-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .diagram-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Hotspots */
        .hotspot {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: box-shadow 0.2s ease, background 0.2s ease;
            background: transparent;
        }

        .hotspot:hover {
            box-shadow: 0 0 0 4px var(--teal-light), 0 0 20px rgba(26, 122, 140, 0.3);
            background: rgba(26, 122, 140, 0.05);
        }

        .hotspot:focus {
            outline: none;
            box-shadow: 0 0 0 4px var(--teal);
        }

        /* Hotspot positions */
        .hotspot-whakariterite {
            left: 6.5%;
            top: 7.5%;
            width: 17%;
            height: 30%;
        }

        .hotspot-rapunga {
            left: 5.5%;
            top: 49.5%;
            width: 17%;
            height: 30%;
        }

        .hotspot-kitenga {
            left: 28.2%;
            top: 40.6%;
            width: 13.5%;
            height: 24%;
        }

        .hotspot-whainga {
            left: 41.5%;
            top: 16%;
            width: 16%;
            height: 28%;
        }

        .hotspot-whiwhinga {
            left: 52.1%;
            top: 42%;
            width: 16.4%;
            height: 28.1%;
        }

        .hotspot-rawenga {
            left: 77.95%;
            top: 28.6%;
            width: 16.5%;
            height: 28.2%;
        }

        /* Backdrop */
        .backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--backdrop);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 100;
        }

        .backdrop.active {
            opacity: 1;
            visibility: visible;
        }

        /* Panel */
        .panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-panel);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            max-width: 680px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            z-index: 101;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.25s ease, visibility 0.25s ease;
        }

        .panel.active {
            opacity: 1;
            visibility: visible;
        }

        .panel-header {
            position: sticky;
            top: 0;
            background: var(--bg-panel);
            padding: 20px 24px 12px;
            border-bottom: 1px solid #eee;
            z-index: 1;
        }

        .panel-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 32px;
            height: 32px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s ease;
        }

        .panel-close:hover {
            background: #f0f0f0;
        }

        .panel-close svg {
            width: 20px;
            height: 20px;
            stroke: var(--text-secondary);
        }

        .panel-title {
            font-size: 26px;
            font-weight: 600;
            line-height: 1.2;
            color: var(--text-primary);
            padding-right: 40px;
        }

        .panel-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .panel-content {
            padding: 20px 24px 24px;
        }

        .panel-section {
            margin-bottom: 24px;
        }

        .panel-section:last-child {
            margin-bottom: 0;
        }

        .panel-section-title {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .panel-text {
            font-size: 16px;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .panel-text p {
            margin-bottom: 12px;
        }

        .panel-text p:last-child {
            margin-bottom: 0;
        }

        .reflection-questions {
            background: #f8f9fa;
            padding: 16px;
            border-radius: var(--radius);
            border-left: 3px solid var(--teal);
        }

        .reflection-questions li {
            margin-bottom: 8px;
            margin-left: 16px;
        }

        .reflection-questions li:last-child {
            margin-bottom: 0;
        }

        /* Tool tags (non-clickable) */
        .tool-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tool-tag {
            display: inline-block;
            font-size: 14px;
            color: var(--teal);
            padding: 6px 12px;
            background: var(--teal-light);
            border-radius: 4px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .panel {
                width: 95%;
                max-height: 90vh;
            }

            .panel-header {
                padding: 16px 16px 10px;
            }

            .panel-content {
                padding: 16px;
            }

            .panel-title {
                font-size: 22px;
            }

            .hotspot {
                min-width: 44px;
                min-height: 44px;
            }
        }
    </style>
</head>
<body>

<!-- Main content -->
<div class="container">
    <div class="diagram-container">
        <img src="HautuWakaProcess.png" alt="Hautū Waka Process Diagram">
        
        <!-- Hotspots -->
        <div class="hotspot hotspot-whakariterite" tabindex="0" 
             onclick="showStage('whakariterite')" 
             onkeydown="handleKeydown(event, 'whakariterite')"
             aria-label="Whakariterite - Prepare for the journey"></div>
        
        <div class="hotspot hotspot-rapunga" tabindex="0" 
             onclick="showStage('rapunga')" 
             onkeydown="handleKeydown(event, 'rapunga')"
             aria-label="Te Rāpunga - Venture into the unknown"></div>
        
        <div class="hotspot hotspot-kitenga" tabindex="0" 
             onclick="showStage('kitenga')" 
             onkeydown="handleKeydown(event, 'kitenga')"
             aria-label="Te Kitenga - Sight tohu"></div>
        
        <div class="hotspot hotspot-whainga" tabindex="0" 
             onclick="showStage('whainga')" 
             onkeydown="handleKeydown(event, 'whainga')"
             aria-label="Te Whāinga - Make decisions based on tohu"></div>
        
        <div class="hotspot hotspot-whiwhinga" tabindex="0" 
             onclick="showStage('whiwhinga')" 
             onkeydown="handleKeydown(event, 'whiwhinga')"
             aria-label="Te Whiwhinga - Do the do"></div>
        
        <div class="hotspot hotspot-rawenga" tabindex="0" 
             onclick="showStage('rawenga')" 
             onkeydown="handleKeydown(event, 'rawenga')"
             aria-label="Te Rāwenga - The good place"></div>
    </div>
</div>

<!-- Backdrop -->
<div class="backdrop" id="backdrop" onclick="closePanel()"></div>

<!-- Panel -->
<div class="panel" id="panel">
    <div class="panel-header">
        <button class="panel-close" onclick="closePanel()" aria-label="Close panel">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
        </button>
        <h2 class="panel-title" id="panelTitle"></h2>
        <div class="panel-subtitle" id="panelSubtitle"></div>
    </div>
    <div class="panel-content" id="panelContent"></div>
</div>

<script>
// Data
const stages = {
    whakariterite: {
        id: 'whakariterite',
        name: 'Whakariterite',
        subtitle: 'Prepare for the journey',
        asStage: 'Define the journey\'s purpose. Determine who comes and who stays behind. Gather what you\'ll need — physically, mentally, spiritually. Set up Te Rāwenga (the good place) by deciding what experience you want, not just where you\'re going.',
        asState: 'A mode of ongoing readiness. You return here when conditions demand reassessment — when the crew needs to change, when purpose has drifted, when you\'ve been at sea long enough to forget why you left.',
        questions: [
            'What is the purpose of this journey?',
            'Who needs to come, and who needs to stay off?',
            'What will we need — and what must we leave behind?'
        ],
        tools: ['Te Whare Tapa Whā', 'Emotional Culture Deck', 'Theory of Change', 'PESTLE', 'Two Loops Model']
    },
    rapunga: {
        id: 'rapunga',
        name: 'Te Rāpunga',
        subtitle: 'Venture into the unknown',
        asStage: 'Set off into uncertainty. Name what you\'re afraid of and what excites you. Move from preparation into active searching with your whole being — not just your analytical mind.',
        asState: 'The experience of being in the unknown. You return here whenever you face unfamiliar territory, whenever the familiar signposts disappear, whenever you need to ask again: what are we afraid of? Sometimes the moana is wild; sometimes it\'s flat and you\'re not moving. Both are Te Rāpunga.',
        questions: [
            'What are we excited about?',
            'What are we afraid of?',
            'What opportunities emerge from that fear?'
        ],
        tools: ['Emotional Culture Deck', 'More Than Words (Imagery Cards)', 'Deeper Questions', 'Te Whare Tapa Whā']
    },
    kitenga: {
        id: 'kitenga',
        name: 'Te Kitenga',
        subtitle: 'Sight tohu',
        asStage: 'Look for signs. Identify where you\'re looking and what you\'re seeing. Triangulate — a single data point means nothing; you need convergent signals from multiple sources.',
        asState: 'A mode of heightened attention and pattern recognition. You can be here while also being in Te Rāpunga. You\'re not acting yet — you\'re reading conditions, noticing what the environment, the organisation, or the situation is telling you. Stillness to see clearly.',
        questions: [
            'Where are we looking for signs?',
            'What signs are we seeing?',
            'What patterns are forming across multiple sources?'
        ],
        tools: ['6 Conditions of Systems Change', 'PESTLE', 'More Than Words (Imagery Cards)', 'Reflexiv Model', '6 Thinking Hats']
    },
    whainga: {
        id: 'whainga',
        name: 'Te Whāinga',
        subtitle: 'Make decisions based on tohu',
        asStage: 'Assess the signs you\'ve gathered. Decide: push through, go around, or return? What risks can you afford? What can you not? Commit to a direction based on what you\'re seeing, not a predetermined plan.',
        asState: 'A decision point you can enter at any time. None of the choices are right or wrong — they\'re responses to conditions. You might cycle through multiple Te Whāinga moments in a single journey as new tohu emerge.',
        questions: [
            'What decisions do we need to make, based on the signs?',
            'What risks can we afford to take? What can we not?',
            'Do we push through, go around, or return?'
        ],
        tools: ['6 Thinking Hats', 'DVFE', 'Theory of Change', 'Emotional Culture Deck']
    },
    whiwhinga: {
        id: 'whiwhinga',
        name: 'Te Whiwhinga',
        subtitle: 'Do the do',
        asStage: 'Execute. Grasp what you can take hold of. Assign who does what, by when, with what support. Move from analysis to committed action.',
        asState: 'The mode of committed engagement. Tūwhitia te hopo, mairangitia te angitū — feel the fear and do it anyway. You\'re grappling with the work, making mistakes, correcting as you go. Action in a dancing landscape, not execution of a fixed plan.',
        questions: [
            'Who needs to do what, and by when?',
            'What help might they need?',
            'What can we grasp and take hold of right now?'
        ],
        tools: ['Te Whare Tapa Whā', 'Reflexiv Model', 'Emotional Culture Deck']
    },
    rawenga: {
        id: 'rawenga',
        name: 'Te Rāwenga',
        subtitle: 'The good place',
        asStage: 'Arrive. Reflect on the journey. Celebrate what was achieved. Acknowledge the people and tohu who helped. Ask: what can we gift to others to help their future journeys?',
        asState: 'A mode of assessment and reflection. Is this the good place? You might arrive at your goal and realise it\'s not good enough. You might not reach your goal but find yourself somewhere that is. Te Rāwenga isn\'t about hitting targets — it\'s about recognising when you\'ve arrived somewhere worth stopping.',
        questions: [
            'How will we know we\'ve arrived at the good place?',
            'How will we celebrate, reflect, and acknowledge those who helped?',
            'What can we gift to others to help their future journeys?'
        ],
        tools: ['Project Funeral / Closing Ritual', 'Reflexiv Model', 'Pixar Story Spine', 'Two Loops Model', 'Deeper Questions']
    }
};

// Functions
function showStage(stageId) {
    const stage = stages[stageId];
    if (!stage) return;
    
    renderStagePanel(stage);
    openPanel();
}

function renderStagePanel(stage) {
    document.getElementById('panelTitle').textContent = stage.name;
    document.getElementById('panelSubtitle').textContent = stage.subtitle;
    
    let html = '';
    
    // As a stage
    html += `
        <div class="panel-section">
            <div class="panel-section-title">As a stage</div>
            <div class="panel-text"><p>${stage.asStage}</p></div>
        </div>
    `;
    
    // As a state
    html += `
        <div class="panel-section">
            <div class="panel-section-title">As a state</div>
            <div class="panel-text"><p>${stage.asState}</p></div>
        </div>
    `;
    
    // Reflection questions
    html += `
        <div class="panel-section">
            <div class="panel-section-title">Reflection questions</div>
            <div class="reflection-questions">
                <ul>
                    ${stage.questions.map(q => `<li>${q}</li>`).join('')}
                </ul>
            </div>
        </div>
    `;
    
    // Tools (as static tags, not clickable)
    html += `
        <div class="panel-section">
            <div class="panel-section-title">Tools</div>
            <div class="tool-list">
                ${stage.tools.map(tool => `<span class="tool-tag">${tool}</span>`).join('')}
            </div>
        </div>
    `;
    
    document.getElementById('panelContent').innerHTML = html;
}

function openPanel() {
    document.getElementById('backdrop').classList.add('active');
    document.getElementById('panel').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closePanel() {
    document.getElementById('backdrop').classList.remove('active');
    document.getElementById('panel').classList.remove('active');
    document.body.style.overflow = '';
}

function handleKeydown(event, stageId) {
    if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        showStage(stageId);
    }
}

// Close on escape
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        closePanel();
    }
});
</script>

</body>
</html>
